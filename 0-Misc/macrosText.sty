% Useful text commands
\def\linethickness{0.4pt}
\newcommand{\hr}{\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}}

\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\newcommand{\abstractStartChapter}{%
    % \paragraph{Abstract.}%
    % \paragraph{}%
    \indent%
}
\newcommand{\minitocStartChapter}{%
    \vfill{}% WARNING vfill before minitoc?
    \minitoc%
    \vfill{}% WARNING vfill before minitoc?
    \newpage%
}
\newcommand{\minitocStartChapterNoNewPage}{%
    \vfill{}% WARNING vfill before minitoc?
    \minitoc%
    \vfill{}% WARNING vfill before minitoc?
    % \newpage%
}

% ----------------------------------------------------------------------

% Abbreviations, to ensure they have dots and are not written ie, eg, cf, iid
\newcommand{\ie}{\emph{i.e.}}
\newcommand{\eg}{\emph{e.g.}}
\newcommand{\cf}{\emph{cf}}
\newcommand{\iid}{\emph{i.i.d.}}
% ----------------------------------------------------------------------

% Generic maths
\newcommand\norm[1]{\left\lVert#1\right\rVert}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\newcommand{\limInf}{\underline{\lim}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\eps}{\varepsilon}
\renewcommand{\epsilon}{\varepsilon}
\renewcommand{\log}{\ensuremath{\ln}}
% ----------------------------------------------------------------------

% Maths operators
\newcommand{\bigO}[1]{\ensuremath{\mathop{}\mathopen{}\mathcal{O}\mathopen{}\left(#1\right)}}
\newcommand{\smallO}[1]{\ensuremath{\mathop{}\mathopen{}o\mathopen{}\left(#1\right)}}
% ----------------------------------------------------------------------

% Probability Shorthands
\def\ind{\mathds{1}}
\newcommand{\normal}[2]{\mathcal{N}\left(#1,#2\right)}
\newcommand{\BetaD}[2]{\text{Beta}\left(#1,#2 \right)}
\newcommand{\muhat}{\hat{\mu}}
\newcommand{\E}{\mathbb{E}}
\renewcommand{\Pr}{\mathbb{P}}
\newcommand{\indic}{\mathbbm{1}}

% ----------------------------------------------------------------------

% Calligraphic Shorthands
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cK}{\mathcal{K}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}
% ----------------------------------------------------------------------

% Blackboard Bold Shorthands
\newcommand{\bE}{\mathbb{E}}
\newcommand{\bP}{\mathbb{P}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
% ----------------------------------------------------------------------


% Misc Math Operations Shorthands
% \newcommand{\argmin}[1]{\underset{#1}{\text{argmin }}}
% \newcommand{\argmax}[1]{\underset{#1}{\text{argmax }}}
\newcommand{\ngoesto}{\underset{n\rightarrow \infty}{\rightarrow}}
\newcommand{\Tgoesto}{\underset{T\rightarrow \infty}{\longrightarrow}}
\newcommand{\isequT}{\underset{T\rightarrow \infty}{\sim}}
% ----------------------------------------------------------------------

% https://tex.stackexchange.com/a/7045/97964
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
    \node[shape=circle,draw,inner sep=2pt] (char) {#1};}%
}
% https://tex.stackexchange.com/a/204897/97964
\newcommand*\boldcircled[1]{\tikz[baseline=(char.base)]{
    \node[shape=circle,draw,line width=0.75mm,inner sep=2pt] (char) {#1};}%
}

% ----------------------------------------------------------------------
% A better leftbar env with colors! Default is black http://tex.stackexchange.com/a/22530/97964
\definecolor{darkgray}{rgb}{0.15,0.15,0.15}   % Define a new color rgb(38, 38, 38)
\definecolor{lightgray}{rgb}{0.95,0.95,0.95}  % Define a new color rgb(239, 239, 239)
\definecolor{lightlightgray}{rgb}{0.97,0.97,0.97}  % Define a new color rgb(247, 247, 247)
% use it inside a theorem/lemma/... with thereombar/lemmabar/... color

% FIXME mettre la barre à gauche pour les pages paires et à droites pour les pages impaires ?
\renewenvironment{leftbar}[1][black]{%
    \def\FrameCommand{%
        {\color{#1}\vrule width 0.75pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{lightgray}%
    }%
    \vspace*{-2pt}%  % XXX Experimental ! It works fine like this, I like it!
    \MakeFramed{\hsize\hsize\advance\hsize-\width\FrameRestore}%
    % \vspace*{-3pt}%  % XXX Experimental ! It works fine like this, I like it!
}{%
    % \vspace*{-30}%  % XXX Experimental ! It works fine like this, I like it!
    \endMakeFramed%
    % \vspace*{-20pt}%  % XXX Experimental ! It works fine like this, I like it!
}
\newenvironment{leftbarnospace}[1][black]{%
    \def\FrameCommand{%
        {\color{#1}\vrule width 0.75pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{lightgray}%
    }%
    \vspace*{-2pt}%  % XXX Experimental ! It works fine like this, I like it!
    \MakeFramed{\hsize\hsize\advance\hsize-\width\FrameRestore}%
    % \vspace*{-3pt}%  % XXX Experimental ! It works fine like this, I like it!
}{%
    % \vspace*{-30}%  % XXX Experimental ! It works fine like this, I like it!
    \endMakeFramed%
    % \vspace*{-20pt}%  % XXX Experimental ! It works fine like this, I like it!
}
\newenvironment{lightleftbar}[1][black]{%
    \def\FrameCommand{%
        {\color{#1}\vrule width 0.75pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{lightlightgray}%
    }%
    \vspace*{-2pt}%  % XXX Experimental ! It works fine like this, I like it!
    \MakeFramed{\hsize\hsize\advance\hsize-\width\FrameRestore}%
    % \vspace*{-3pt}%  % XXX Experimental ! It works fine like this, I like it!
}{%
    \vspace*{-30pt}%  % XXX Experimental ! It works fine like this, I like it!
    \endMakeFramed%
    % \vspace*{-20pt}%  % XXX Experimental ! It works fine like this, I like it!
}
\newenvironment{whiteleftbar}[1][black]{%
    \def\FrameCommand{%
        {\color{#1}\vrule width 0.75pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{white}%
    }%
    \vspace*{-2pt}%  % XXX Experimental ! It works fine like this, I like it!
    \MakeFramed{\hsize\hsize\advance\hsize-\width\FrameRestore}%
    % \vspace*{-3pt}%  % XXX Experimental ! It works fine like this, I like it!
}{%
    \vspace*{-30pt}%  % XXX Experimental ! It works fine like this, I like it!
    \endMakeFramed%
    % \vspace*{-20pt}%  % XXX Experimental ! It works fine like this, I like it!
}

% Define colors for the theorem/defb/prop/.. left bar
\definecolor{theorembar}{rgb}{0,242,0}          % Define a new color rgb(0,242,0)
\definecolor{defnbar}{rgb}{0,0,242}             % Define a new color rgb(0,0,242)
\definecolor{propositionbar}{rgb}{147,0,255}    % Define a new color rgb(147,0,255)
\definecolor{corollarybar}{rgb}{0,242,242}      % Define a new color rgb(0,242,242)
\definecolor{lemmabar}{rgb}{255,0,198}          % Define a new color rgb(255,0,198)
\definecolor{warningbar}{rgb}{229,0,0}          % Define a new color rgb(229,0,0)
\definecolor{propertybar}{rgb}{255,255,0}       % Define a new color rgb(255,255,0)
\definecolor{assumptionbar}{rgb}{235,200,0}     % Define a new color rgb(235,200,0)
\definecolor{examplebar}{rgb}{0,0,0}            % Define a new color rgb(0,0,0)
\definecolor{proofbar}{rgb}{0,70,0}             % Define a new color rgb(0,70,0)
\definecolor{remarkbar}{rgb}{255,135,0}         % Define a new color rgb(255,135,0)
\definecolor{tablebar}{rgb}{147,0,255}          % Define a new color rgb(147,0,255)
% ----------------------------------------------------------------------

% FIXME just remove the small...small if I want normalsize proofs
\newenvironment{smallproof}{%
    % \begin{small}%
    \begin{proof}%
    % \leftskip=0.25cm\rightskip=0.25cm%  Cf. https://tex.stackexchange.com/a/62056/97964
}{%
    \end{proof}%
    % \end{small}%
}



% ----------------------------------------------------------------------
\makeatletter
% Thanks to https://tex.stackexchange.com/a/53691/
\newcommand{\mytag}[2]{%
    \text{#1}%
    \@bsphack
    \begingroup
        \@onelevel@sanitize\@currentlabelname
        \edef\@currentlabelname{%
        \expandafter\strip@period\@currentlabelname\relax.\relax\@@@%
        }%
        \protected@write\@auxout{}{%
        \string\newlabel{#2}{%
            {#1}%
            {\thepage}%
            {\@currentlabelname}%
            {\@currentHref}{}%
        }%
        }%
    \endgroup
    \@esphack
}
\makeatother
% ----------------------------------------------------------------------
